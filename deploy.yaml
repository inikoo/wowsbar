import:
  - deploy/env.php
  - recipe/laravel.php
  - deploy/lib/common.php
  - deploy/supervisor.php
  - deploy/nginx.php
  - deploy/install.php
  - deploy/deploy.php
  - contrib/npm.php
  - contrib/discord.php

config:
  application: 'wowsbar'
  host: 'wowsbar'
  remote_user: wowsbar
  repository: 'https://github.com/inikoo/wowsbar.git'
  db: 'wowsbar'
  db_backup: 'wowsbar_backup'
  db_collate: 'C.UTF-8'
  writable_use_sudo: true
  root_path: '/var/www/wowsbar'
  app_urls: 'wowsbar.com *.wowsbar.com awads.io *.awads.io'
  http_port: 8080

hosts:
  wowsbar:
    environment: 'prod'
    deploy_path: '{{root_path}}/prod'
    branch: production
tasks:
  build:
    - run: uptime

after:
  deploy:failed: [deploy:unlock, discord:notify:failure]
  deploy:success: [ discord:notify:success ]
  deploy:update_code: [npm:install, deploy:vendors]

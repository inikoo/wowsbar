function iframeStyle(e,o){e.id=`iframe-wowsbar-${o}`,e.setAttribute("allowTransparency","true"),e.style.height="0px",e.style.width="100%",e.style.display="block",e.style.backgroundColor="transparent",e.style.border="none",e.style.isolation="isolate",e.style.position="relative",e.style.zIndex=9999,e.style.transition="all 0.2s ease-in-out",e.frameBorder="0"}async function fetchAnnouncementData(){const e=new URL(document.currentScript.src),o=e.searchParams.get("ulid"),t=e.searchParams.get("delivery");console.log("ulid:",o,"deliveryUrl:",t);const n=window.location.hostname,r=window.location.pathname;if(console.log("domain:",n,"path:",r),o)try{const e=await fetch(`ar_web_wowsbar_announcement.php?url_KHj321Tu=${t}/announcement/${o}`,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((async e=>{const o=await e.text();if(console.log("ar_web_wowsbar:",o),!e.ok)throw new Error("Network response was not ok ---- "+e.statusText);return o}));console.log("======== new Announctment data",e),document.querySelector("#wowsbar_announcement").innerHTML=e;const n=propertiesToHTMLStyle(e.container_properties);console.log("announcementData",n);const r=document.createElement("iframe");r.src=`https://delivery-staging.wowsbar.com/announcement/${o}`,iframeStyle(r,o),window.addEventListener("message",(function(e){console.log("received message",e.data),"close_button_click"===e.data&&(console.log("Close button clicked"),r.style.top=`-${parseInt(n.height,10)+parseInt(n.height,10)}px`)}));for(const[e,o]of Object.entries(n))r.style[e]=o;const i=document.body;i.insertBefore(r,i.firstChild)}catch(e){console.error("Someting went wrong:",e)}else console.log("ulid is not exist")}function propertiesToHTMLStyle(e,o){const t={position:e.position?.type||"static",left:e.isCenterHorizontal&&"fixed"===e.position.type?"50%":e.position?.x||"0px",top:e.position?.y||"0px",transform:e.isCenterHorizontal&&"fixed"===e.position.type?"translateX(-50%)":"",height:(e?.dimension?.height?.value||0)+e?.dimension?.height?.unit||"px",width:(e?.dimension?.width?.value||0)+e?.dimension?.width?.unit||"px",color:e?.text?.color,fontFamily:e?.text?.fontFamily,paddingTop:(e?.padding?.top?.value||0)+e?.padding?.unit,paddingBottom:(e?.padding?.bottom?.value||0)+e?.padding?.unit,paddingRight:(e?.padding?.right?.value||0)+e?.padding?.unit,paddingLeft:(e?.padding?.left?.value||0)+e?.padding?.unit,marginTop:(e?.margin?.top?.value||0)+e?.margin?.unit,marginBottom:(e?.margin?.bottom?.value||0)+e?.margin?.unit,marginRight:e.isCenterHorizontal?"auto":(e?.margin?.right?.value||0)+e?.margin?.unit,marginLeft:e.isCenterHorizontal?"auto":(e?.margin?.left?.value||0)+e?.margin?.unit,background:"color"===e?.background?.type?e?.background?.color:e?.background?.image,borderTop:`${e?.border?.top?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderBottom:`${e?.border?.bottom?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderRight:`${e?.border?.right?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderLeft:`${e?.border?.left?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderTopRightRadius:`${e?.border?.rounded?.topright?.value}${e?.border?.rounded?.unit}`,borderBottomRightRadius:`${e?.border?.rounded?.bottomright?.value}${e?.border?.rounded?.unit}`,borderBottomLeftRadius:`${e?.border?.rounded?.bottomleft?.value}${e?.border?.rounded?.unit}`,borderTopLeftRadius:`${e?.border?.rounded?.topleft?.value}${e?.border?.rounded?.unit}`};return o?.toRemove&&o.toRemove.forEach((e=>{delete t[e]})),t}fetchAnnouncementData();
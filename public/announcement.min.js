const scriptUrl=new URL(document.currentScript.src),ulid=scriptUrl.searchParams.get("ulid"),deliveryUrl=scriptUrl.searchParams.get("delivery");function iframeStyle(e){e.id=`iframe-wowsbar-${ulid}`,e.setAttribute("allowTransparency","true"),e.style.height="0px",e.style.width="100%",e.style.display="block",e.style.backgroundColor="transparent",e.style.border="none",e.style.isolation="isolate",e.style.position="relative",e.style.zIndex=9999,e.style.transition="all 0.2s ease-in-out",e.frameBorder="0"}async function fetchAnnouncementData(){if(ulid){window.location.href;console.log("fetchAnnouncementData");try{const e=propertiesToHTMLStyle((await fetch(`ar_web_wowsbar_announcement.php?url_KHj321Tu=${deliveryUrl}/announcement/${ulid}`,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return console.log("resresrespon",e),e.json()}))).container_properties);console.log("announcementData",e);const o=document.createElement("iframe");o.src=`https://delivery-staging.wowsbar.com/announcement/${ulid}`,iframeStyle(o),window.addEventListener("message",(function(t){console.log("received message",t.data),"close_button_click"===t.data&&(console.log("Close button clicked"),o.style.top=`-${parseInt(e.height,10)+parseInt(e.height,10)}px`)}));for(const[t,r]of Object.entries(e))o.style[t]=r;const t=document.body;t.insertBefore(o,t.firstChild)}catch(e){console.error("There was a problem with the fetch operation:",e)}}else console.log("ulid is not exist")}function propertiesToHTMLStyle(e,o){const t={position:e.position?.type||"static",left:e.isCenterHorizontal&&"fixed"===e.position.type?"50%":e.position?.x||"0px",top:e.position?.y||"0px",transform:e.isCenterHorizontal&&"fixed"===e.position.type?"translateX(-50%)":"",height:(e?.dimension?.height?.value||0)+e?.dimension?.height?.unit||"px",width:(e?.dimension?.width?.value||0)+e?.dimension?.width?.unit||"px",color:e?.text?.color,fontFamily:e?.text?.fontFamily,paddingTop:(e?.padding?.top?.value||0)+e?.padding?.unit,paddingBottom:(e?.padding?.bottom?.value||0)+e?.padding?.unit,paddingRight:(e?.padding?.right?.value||0)+e?.padding?.unit,paddingLeft:(e?.padding?.left?.value||0)+e?.padding?.unit,marginTop:(e?.margin?.top?.value||0)+e?.margin?.unit,marginBottom:(e?.margin?.bottom?.value||0)+e?.margin?.unit,marginRight:e.isCenterHorizontal?"auto":(e?.margin?.right?.value||0)+e?.margin?.unit,marginLeft:e.isCenterHorizontal?"auto":(e?.margin?.left?.value||0)+e?.margin?.unit,background:"color"===e?.background?.type?e?.background?.color:e?.background?.image,borderTop:`${e?.border?.top?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderBottom:`${e?.border?.bottom?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderRight:`${e?.border?.right?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderLeft:`${e?.border?.left?.value||0}${e?.border?.unit||"px"} solid ${e?.border?.color}`,borderTopRightRadius:`${e?.border?.rounded?.topright?.value}${e?.border?.rounded?.unit}`,borderBottomRightRadius:`${e?.border?.rounded?.bottomright?.value}${e?.border?.rounded?.unit}`,borderBottomLeftRadius:`${e?.border?.rounded?.bottomleft?.value}${e?.border?.rounded?.unit}`,borderTopLeftRadius:`${e?.border?.rounded?.topleft?.value}${e?.border?.rounded?.unit}`};return o?.toRemove&&o.toRemove.forEach((e=>{delete t[e]})),t}console.log("ULID:",ulid),fetchAnnouncementData();